# ZipUrl Microservices Documentation
### This is the overall structure diagram
![image](https://github.com/ArcherUz/ZipURL-Services/assets/37568976/90d43769-8a75-4014-893d-f1c6c02fae92)

## Customer register and login
### Register customer at localhost:8080/user/register. Login at localhost:8080/user/login
```json
{
    "email" : "test123@gmail.com",
    "password" : "admin"
}
```
### Get 200 response with access token and refresh token. Those jwt token are generated by keycloak
![image](https://github.com/ArcherUz/ZipURL-Services/assets/37568976/27c13092-6f28-44ba-ae31-8c0ca241c2b1)

### In keycloak server at localhost:8181, you can find the registed user:
![image](https://github.com/ArcherUz/ZipURL-Services/assets/37568976/ac81c0cb-06ad-4264-a4d7-9588abf2a123)

## Encode long url
### After login, take the access token to Bearer authentication header
### Send long url to localhost:8080/user/encode/base62
![image](https://github.com/ArcherUz/ZipURL-Services/assets/37568976/b32451e4-e316-4180-ab08-d6dc0058886c)
### The encoded short url http://localhost:8080/api/urls/hhcht will redirect to the long url page

## Customer and Urlsconvert microservices communication
### Inside the Customer entity, I stored the user email and his used long url String
![image](https://github.com/ArcherUz/ZipURL-Services/assets/37568976/ea40ce2b-eeff-4024-ba21-33db643958fc)
### This long url is used to fetch url object in urlsconvert database.
### Since Customer and Urlsconvert are 2 different microservices, when customer encode a url, in customer service, it will send a WebClient post request to http://urlsconvert/api/urls/base62 with long url body.
### The customer service will catch what urlsconvert returns, and send back to customer.

